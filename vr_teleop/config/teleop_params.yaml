# VR Teleop Configuration
# 配置文件 for Franka FR3 + HTC Vive Focus Vision

# ============================================================
# VR Tracker Node 配置
# ============================================================
vr_tracker_node:
  ros__parameters:
    # 更新频率 (Hz) - SteamVR通常支持90Hz
    update_rate: 90.0

    # 是否发布TF变换
    publish_tf: true

    # VR原点坐标系名称
    frame_id: "vr_origin"

    # 启用的控制器
    enable_left_controller: true
    enable_right_controller: true

# ============================================================
# Franka Teleop Node 配置
# ============================================================
franka_teleop_node:
  ros__parameters:
    # ---------- 控制模式 ----------
    # 'incremental': 增量模式 - VR位移映射到机器人位移 (推荐)
    # 'absolute': 绝对模式 - VR位置直接映射到机器人位置
    # 'velocity': 速度模式 - VR速度映射到机器人速度
    control_mode: "incremental"

    # ---------- 缩放因子 ----------
    # 位置缩放: 1.0 = 1:1映射, 0.5 = VR移动1m机器人移动0.5m
    position_scale: 1.0

    # 旋转缩放
    rotation_scale: 1.0

    # 控制频率 (Hz)
    update_rate: 100.0

    # ---------- 安全限制 ----------
    # 最大线速度 (m/s) - 建议初期设置较低值
    max_linear_velocity: 0.1

    # 最大角速度 (rad/s)
    max_angular_velocity: 0.5

    # 最大线加速度 (m/s^2)
    max_linear_acceleration: 0.5

    # 扳机激活阈值 (0-1)
    trigger_threshold: 0.5

    # ---------- 工作空间限制 (米) ----------
    # Franka FR3 工作空间 (根据实际环境调整)
    workspace:
      x_min: 0.2    # 机器人前方最近距离
      x_max: 0.7    # 机器人前方最远距离
      y_min: -0.4   # 左侧
      y_max: 0.4    # 右侧
      z_min: 0.05   # 最低高度 (避免碰撞桌面)
      z_max: 0.6    # 最高高度

    # ---------- Home位置 ----------
    # 机器人初始/默认末端位置 (米)
    home_position: [0.4, 0.0, 0.3]

    # 机器人初始/默认末端姿态 (四元数 w,x,y,z)
    # 末端朝下的姿态
    home_orientation: [0.0, 1.0, 0.0, 0.0]

    # ---------- 坐标系变换 ----------
    # VR到机器人坐标系的旋转 (roll, pitch, yaw in degrees)
    # 根据您的VR设置和机器人朝向调整
    vr_to_robot_rotation: [0.0, 0.0, -90.0]

# ============================================================
# 夹爪配置
# ============================================================
gripper:
  ros__parameters:
    # 夹爪完全打开宽度 (米)
    max_width: 0.08

    # 夹爪完全关闭宽度 (米)
    min_width: 0.0

    # 夹爪力 (牛顿)
    grip_force: 20.0

    # 夹爪速度 (米/秒)
    grip_speed: 0.1
