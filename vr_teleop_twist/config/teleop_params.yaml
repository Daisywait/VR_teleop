# VR Teleop Configuration
# 配置文件 for Franka FR3 + HTC Vive Focus Vision

# ============================================================
# VR Tracker Node 配置
# ============================================================
vr_tracker_node:
  ros__parameters:
    # 更新频率 (Hz) - SteamVR通常支持90Hz
    update_rate: 90.0

    # 是否发布TF变换
    publish_tf: true

    # VR原点坐标系名称
    frame_id: "vr_room"

    # HMD坐标系名称（相对位姿的参考坐标）
    hmd_frame_id: "vr_hmd_ros"

    # 启用右手控制器
    enable_right_controller: true

# ============================================================
# Franka Teleop Node 配置
# ============================================================
vr_converter_node:
  ros__parameters:
    # ---------- 控制参数 ----------
    linear_scale: 1.0
    angular_scale: 1.0
    v_max: 1.0
    w_max: 1.0
    smoothing_factor: 0.8
    deadzone_linear: 0.05
    deadzone_angular: 0.03
    trigger_threshold: 0.5

    # ---------- 参考坐标系 ----------
    planning_frame: "fr3_link0"
    ee_frame: "robotiq_85_tcp"

    # ---------- 发布频率 ----------
    publish_rate: 50.0

    # ---------- 坐标系变换 ----------
    # 固定旋转补偿已移除，依赖TF对齐

    # 夹爪TCP相对 base_link 的静态偏移 (xyz, rpy in meters/degrees)
    gripper_tcp_xyz: [0.0, 0.0, 0.0]
    gripper_tcp_rpy: [0.0, 0.0, 0.0]

    # ---------- Servo话题 ----------
    twist_topic: "/moveit_servo/delta_twist_cmds"

    # ---------- 夹爪配置 ----------
    gripper_action: "/robotiq_gripper_controller/gripper_cmd"
    gripper_open_pos: 0.0
    gripper_close_pos: 0.8
    gripper_force: 50.0
    gripper_speed: 0.8
    gripper_axis_deadzone: 0.08
    gripper_deadband: 0.01
    gripper_rate: 15.0
